<!DOCTYPE html>
<html>
  

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Language" content="es_ES" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-M146BEZEJV"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-M146BEZEJV');
  </script>

  <meta name="description" content="FAQs to help you migrate your Dart code to null safety">
  <title>FAQ (null safety) | Dart es Español</title>

  <!-- Favicon / Touch Icons -->
  <link rel="icon" sizes="64x64" href="/assets/shared/dart/icon/64.png">
  <link href="/assets/img/touch-icon-iphone.png" rel="apple-touch-icon">
  <link href="/assets/img/touch-icon-ipad.png" rel="apple-touch-icon" sizes="152x152">
  <link href="/assets/img/touch-icon-iphone-retina.png" rel="apple-touch-icon" sizes="180x180">
  <link href="/assets/img/touch-icon-ipad-retina.png" rel="apple-touch-icon" sizes="167x167">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@dart_lang" />
  <meta name="twitter:title" content="Null safety: Frequently asked questions" />
  <meta name="twitter:description" content="FAQs to help you migrate your Dart code to null safety" />

  <!-- Open Graph -->
  <meta property="og:title" content="Null safety: Frequently asked questions" />
  <meta property="og:description" content="FAQs to help you migrate your Dart code to null safety" />
  <meta property="og:url" content="https://dart.esdocu.com/null-safety/faq.html" />
  
  <meta property="og:image" content="https://dart.esdocu.com/assets/shared/dart-logo-for-shares.png?2" />
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Display:wght@400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap" rel="stylesheet">
  <script 
    src="https://use.fontawesome.com/releases/v5.15.4/js/all.js"
    data-auto-replace-svg="nest">
  </script>

  <link rel="stylesheet" href="/assets/css/main.css?v=1662038679">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
          integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
          crossorigin="anonymous"
          referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"
          integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
          crossorigin="anonymous"
          referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.1/js/bootstrap.min.js"
          integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2"
          crossorigin="anonymous"
          referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.1/js.cookie.min.js" 
          integrity="sha512-wT7uPE7tOP6w4o28u1DN775jYjHQApdBnib5Pho4RB0Pgd9y7eSkAV1BTqQydupYDB9GBhTcQQzyNMPMV3cAew==" 
          crossorigin="anonymous" 
          referrerpolicy="no-referrer"></script>

  <script src="/assets/js/vendor/code-prettify/prettify.js"></script>
  <script src="/assets/js/vendor/code-prettify/lang-css.js"></script>
  <script src="/assets/js/vendor/code-prettify/lang-dart.js"></script>
  <script src="/assets/js/vendor/code-prettify/lang-yaml.js"></script>
  <script src="/assets/js/os-tabs.js?v=1662038679"></script>
  <script src="/assets/js/utilities.js?v=1662038679"></script>
  <script src="/assets/js/main.js?v=1662038679"></script>

  <script>

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26406144-4', 'auto');
ga('send', 'pageview');

</script>


 </head>

  <body class="default show_banner">
    <section id="cookie-notice">
  <div class="container">
    <p>Google uses cookies to deliver its services, to personalize ads, and to 
      analyze traffic. You can adjust your privacy controls anytime in your 
      <a href="https://myaccount.google.com/data-and-personalization" target="_blank" rel="noopener" class="no-automatic-external">Google settings</a>. 
      <a href="https://policies.google.com/technologies/cookies" target="_blank" rel="noopener" class="no-automatic-external">Learn more</a>.
    </p>
    <button id="cookie-consent" class="btn btn-primary">Okay</button>
  </div>
</section>

    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5VSZM5J"
 height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <header id="page-header" class="site-header">
  <nav id="mainnav" class="site-header">
  <div id="menu-toggle"><i class="material-icons">menu</i></div>
  <a href="/" class="brand" title="Dart es Español">
    <img src="/assets/img/shared/dart/logo+text/horizontal/white.svg" alt="Dart es Español">
  </a>
  <ul class="navbar">
    <li>
      <a href="/overview" class="nav-link">Overview</a>
    </li>
    <li class="mainnav__get-started">
      <a href="/guides" class="nav-link
        ">
        <span>Docs</span>
      </a>
    </li>
    <li>
      <a href="/community" class="nav-link">Comunidad</a>
    </li>
    <li>
      <a href="/#try-dart" class="nav-link">Probar Dart</a>
    </li>
    <li>
      <a href="/get-dart" class="nav-link">Obtener Dart</a>
    </li>
    <li class="searchfield">
      <form action="/search" class="site-header__search form-inline" id="cse-search-box">
        <input type="hidden" name="cx" value="011220921317074318178:_yy-tmb5t_i">
        <input type="hidden" name="ie" value="UTF-8">
        <input type="hidden" name="hl" value="en">
        <input class="site-header__searchfield form-control search-field" type="search" name="q"
          id="q" autocomplete="off" placeholder="Search" aria-label="Search">
      </form>
    </li>
  </ul>
</nav>

  
</header>
 <div class="banner">
  <p class="banner__text">
    Dart 2.18 ya está disponible con interoperabilidad de Objective-C y Swift y mejoras de networking, la inferencia de tipos y el rendimiento del código asíncrono. <a href="https://medium.com/@mit.mit/dart-2-18-f4b3101f146c">Más información</a><br>
    Los equipos de Flutter y Dart están contratando.
    <a href="https://docs.flutter.dev/jobs">Más información</a>
  </p>
</div> 

    <div id="sidenav" class="">
  <form action="/search/" class="site-header__search form-inline">
    <input class="site-header__searchfield form-control search-field" type="search" name="q"
           id="q" autocomplete="off" placeholder="Search" aria-label="Search">
  </form>

  <div class="site-sidebar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a href="/overview" class="nav-link">Overview</a>
      </li>
      <li class="nav-item">
        <a href="/community" class="nav-link">Comunidad</a>
      </li>
      <li class="nav-item">
        <a href="https://dartpad.dev" class="nav-link">Probar Dart</a>
      </li>
      <li class="nav-item">
        <a href="/get-dart" class="nav-link">Obtener Dart</a>
      </li>
      <li class="nav-item">
        <a href="/guides" class="nav-link">Docs</a>
      </li>
    </ul>

    <ul class="nav flex-column"><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-1" role="button"
        aria-expanded="false" aria-controls="sidenav-1"
      >Samples & tutorials</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-1">
        <li class="nav-item">
    <a class="nav-link" href="/samples">Language samples</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable"
      data-toggle="collapse" data-target="#sidenav-1-2"
      href="#sidenav-1-2" role="button"
      aria-expanded="true" aria-controls="sidenav-1-2"
    >Codelabs
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-1-2">
      <li class="nav-item">
    <a class="nav-link" href="/codelabs">List of Dart codelabs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/codelabs/dart-cheatsheet">Language cheatsheet</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/codelabs/iterables">Iterable collections</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/codelabs/async-await">Asynchronous programming</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/codelabs/null-safety">Null safety</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/tutorials">Tutorials</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link active" data-toggle="collapse" href="#sidenav-2" role="button"
        aria-expanded="true" aria-controls="sidenav-2"
      >Language</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-2">
        <li class="nav-item">
    <a class="nav-link" href="/guides/language/language-tour">Tour</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/type-system">Type system</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-2-3"
      href="#sidenav-2-3" role="button"
      aria-expanded="false" aria-controls="sidenav-2-3"
    >Effective Dart
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-2-3">
      <li class="nav-item">
    <a class="nav-link" href="/guides/language/effective-dart">Overview</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/effective-dart/style">Style</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/effective-dart/documentation">Documentation</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/effective-dart/usage">Usage</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/effective-dart/design">Design</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-2-4"
      href="#sidenav-2-4" role="button"
      aria-expanded="false" aria-controls="sidenav-2-4"
    >Coming from ...
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-2-4">
      <li class="nav-item">
    <a class="nav-link" href="/guides/language/coming-from/js-to-dart">JavaScript to Dart</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/guides/language/extension-methods">Extension methods</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/concurrency">Concurrency</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/numbers">Numbers</a>
  </li><li class="nav-item">
    <a class="nav-link active collapsable"
      data-toggle="collapse" data-target="#sidenav-2-8"
      href="#sidenav-2-8" role="button"
      aria-expanded="true" aria-controls="sidenav-2-8"
    >Null safety
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-2-8">
      <li class="nav-item">
    <a class="nav-link" href="/null-safety">Overview: Sound null safety</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/null-safety/migration-guide">Migrating to null safety</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/null-safety/understanding-null-safety">Understanding null safety</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/null-safety/unsound-null-safety">Unsound null safety</a>
  </li><li class="nav-item">
    <a class="nav-link active" href="/null-safety/faq">FAQ</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/guides/language/evolution">Evolution</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/spec">Specification</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-3" role="button"
        aria-expanded="false" aria-controls="sidenav-3"
      >Core libraries</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3">
        <li class="nav-item">
    <a class="nav-link" href="/guides/libraries">Overview</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/library-tour">Tour</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-3"
      href="#sidenav-3-3" role="button"
      aria-expanded="false" aria-controls="sidenav-3-3"
    >Articles
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-3">
      <li class="nav-item">
    <a class="nav-link" href="/articles/libraries/dart-io">Intro to dart:io</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/articles/libraries/creating-streams">Creating streams</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-4" role="button"
        aria-expanded="false" aria-controls="sidenav-4"
      >Packages</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-4">
        <li class="nav-item">
    <a class="nav-link" href="/guides/packages">How to use packages</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/useful-libraries">Commonly used packages</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/create-library-packages">Creating packages</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/publishing">Publishing packages</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/writing-package-pages">Writing package pages</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-4-6"
      href="#sidenav-4-6" role="button"
      aria-expanded="false" aria-controls="sidenav-4-6"
    >Package reference
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-4-6">
      <li class="nav-item">
    <a class="nav-link" href="/tools/pub/dependencies">Dependencies</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/glossary">Glossary</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/package-layout">Package layout conventions</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/environment-variables">Pub environment variables</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/pubspec">Pubspec file</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/troubleshoot">Troubleshooting pub</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/verified-publishers">Verified publishers</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/versioning">Versioning</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-5" role="button"
        aria-expanded="false" aria-controls="sidenav-5"
      >Development</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5">
        <li class="nav-item">
    <a class="nav-link" href="/codelabs/async-await">Futures, async, await</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/language/streams">Streams</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/json">JSON</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-4"
      href="#sidenav-5-4" role="button"
      aria-expanded="false" aria-controls="sidenav-5-4"
    >Interoperability
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-4">
      <li class="nav-item">
    <a class="nav-link" href="/guides/libraries/c-interop">C interop</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/objective-c-interop">Objective-C and Swift interop</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/js-interop">JavaScript interop</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/guides/google-apis">Google APIs</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/multiplatform-apps">Multi-platform apps</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-7"
      href="#sidenav-5-7" role="button"
      aria-expanded="false" aria-controls="sidenav-5-7"
    >Command-line & server apps
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-7">
      <li class="nav-item">
    <a class="nav-link" href="/server">Overview</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/server/get-started">Get started</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/server/cmdline">Write command-line apps</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/server/httpserver">Write HTTP servers</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/server/libraries">Libraries and packages</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/server/google-cloud">Google Cloud</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-8"
      href="#sidenav-5-8" role="button"
      aria-expanded="false" aria-controls="sidenav-5-8"
    >Web apps
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-8">
      <li class="nav-item">
    <a class="nav-link" href="/web">Overview</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/web/get-started">Get started</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/web/fetch-data">Fetch data dynamically</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-8-4"
      href="#sidenav-5-8-4" role="button"
      aria-expanded="false" aria-controls="sidenav-5-8-4"
    >Low-level web programming
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-8-4">
      <li class="nav-item">
    <a class="nav-link" href="/tutorials/web/low-level-html/connect-dart-html">Connect Dart & HTML</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tutorials/web/low-level-html/add-elements">Add elements to the DOM</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tutorials/web/low-level-html/remove-elements">Remove DOM elements</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/web/deployment">Deployment</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/libraries">Libraries and packages</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-6" role="button"
        aria-expanded="false" aria-controls="sidenav-6"
      >Tools & techniques</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6">
        <li class="nav-item">
    <a class="nav-link" href="/tools">Overview</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-2"
      href="#sidenav-6-2" role="button"
      aria-expanded="false" aria-controls="sidenav-6-2"
    >Editors & debuggers
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-2">
      <li class="nav-item">
    <a class="nav-link" href="/tools/jetbrains-plugin">IntelliJ & Android Studio</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/vs-code">VS Code</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/dart-devtools">Dart DevTools</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/dartpad">DartPad</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-3"
      href="#sidenav-6-3" role="button"
      aria-expanded="false" aria-controls="sidenav-6-3"
    >Command-line tools
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-3">
      <li class="nav-item">
    <a class="nav-link collapsable"
      data-toggle="collapse" data-target="#sidenav-6-3-1"
      href="#sidenav-6-3-1" role="button"
      aria-expanded="true" aria-controls="sidenav-6-3-1"
    >Dart SDK
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-6-3-1">
      <li class="nav-item">
    <a class="nav-link" href="/tools/sdk">Overview</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart-tool">dart</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart-analyze">dart analyze</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart-compile">dart compile</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart-create">dart create</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart-doc">dart doc</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart-fix">dart fix</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart-format">dart format</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/pub/cmd">dart pub</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart-run">dart run</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart-test">dart test</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartaotruntime">dartaotruntime</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/experiment-flags">Experiment flags</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable"
      data-toggle="collapse" data-target="#sidenav-6-3-2"
      href="#sidenav-6-3-2" role="button"
      aria-expanded="true" aria-controls="sidenav-6-3-2"
    >Other command-line tools
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-6-3-2">
      <li class="nav-item">
    <a class="nav-link" href="/tools/build_runner">build_runner</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/webdev">webdev</a>
  </li>
  </ul>
  </li>
</ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-4"
      href="#sidenav-6-4" role="button"
      aria-expanded="false" aria-controls="sidenav-6-4"
    >Managing source code
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-4">
      <li class="nav-item">
    <a class="nav-link" href="/guides/language/formatting">Formatting code</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/private-files">What not to commit</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-5"
      href="#sidenav-6-5" role="button"
      aria-expanded="false" aria-controls="sidenav-6-5"
    >Static analysis
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-5">
      <li class="nav-item">
    <a class="nav-link" href="/guides/language/analysis-options">Customizing static analysis</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/sound-problems">Fixing common type problems</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/diagnostic-messages">Diagnostic messages</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/linter-rules">Linter rules</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-6"
      href="#sidenav-6-6" role="button"
      aria-expanded="false" aria-controls="sidenav-6-6"
    >Testing & optimization
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-6">
      <li class="nav-item">
    <a class="nav-link" href="/guides/testing">Testing</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/debugging">Debugging web apps</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-7" role="button"
        aria-expanded="false" aria-controls="sidenav-7"
      >Resources</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-7">
        <li class="nav-item">
    <a class="nav-link" href="/resources">Overview</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/resources/books">Books</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/resources/dartpad-best-practices">DartPad in tutorials: Best practices</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/code-of-conduct">Code of conduct</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/faq">FAQ</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-7-6"
      href="#sidenav-7-6" role="button"
      aria-expanded="false" aria-controls="sidenav-7-6"
    >History
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-7-6">
      <li class="nav-item">
    <a class="nav-link" href="/dart-2">Migrating to Dart&nbsp;2</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/resources/videos">Videos</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link " data-toggle="collapse" href="#sidenav-8" role="button"
        aria-expanded="true" aria-controls="sidenav-8"
      >Related sites</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-8">
        <li class="nav-item">
    <a class="nav-link" href="https://api.dart.dev" target="_blank" rel="noopener">API reference<span class="material-icons md-24">
        open_in_new
      </span></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://medium.com/dartlang" target="_blank" rel="noopener">Blog<span class="material-icons md-24">
        open_in_new
      </span></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://dartpad.dev" target="_blank" rel="noopener">DartPad (online editor)<span class="material-icons md-24">
        open_in_new
      </span></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://flutter.dev" target="_blank" rel="noopener">Flutter<span class="material-icons md-24">
        open_in_new
      </span></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.dev" target="_blank" rel="noopener">Package site<span class="material-icons md-24">
        open_in_new
      </span></a>
  </li>
</ul>
    </li></ul>

  </div>
</div>

    <main id="page-content">
      







<div id="site-toc--side" class="site-toc ">
  <header class="site-toc__title">
    Contents
    <button type="button" class="btn site-toc--button__page-top" aria-label="Page top"></button>
    
  </header>
  <ul id="toc" class="section-nav">
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#what-runtime-changes-should-i-be-aware-of-for-users-of-migrated-code">What runtime changes should I be aware of for users of migrated code?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#what-if-a-value-is-only-null-in-tests">What if a value is only null in tests?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#how-does-required-compare-to-the-new-required-keyword">How does @required compare to the new required keyword?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#how-should-i-migrate-non-nullable-fields-that-should-be-final-but-arent">How should I migrate non-nullable fields that should be final, but aren’t?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#how-should-i-migrate-a-built_value-class">How should I migrate a built_value class?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#how-should-i-migrate-a-factory-that-can-return-null">How should I migrate a factory that can return null?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#how-should-i-migrate-an-assertx--null-that-now-shows-as-unnecessary">How should I migrate an assert(x != null) that now shows as unnecessary?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#how-should-i-migrate-a-runtime-null-check-that-now-shows-as-unnecessary">How should I migrate a runtime null check that now shows as unnecessary?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#the-iterablefirstwhere-method-no-longer-accepts-orelse---null">The Iterable.firstWhere method no longer accepts orElse: () =&gt; null.</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#how-do-i-deal-with-attributes-that-have-setters">How do I deal with attributes that have setters?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#how-do-i-signal-that-the-return-value-from-a-map-is-non-nullable">How do I signal that the return value from a Map is non-nullable?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#why-is-the-generic-type-on-my-listmap-nullable">Why is the generic type on my List/Map nullable?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#what-happened-to-the-default-list-constructor">What happened to the default List constructor?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#im-using-packageffi-and-get-a-failure-with-dart_cobject_kunsupported-when-i-migrate-what-happened">I’m using package:ffi and get a failure with Dart_CObject_kUnsupported when I migrate. What happened?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#migration-comments">Why does the migration tool add comments to my code?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#what-should-i-know-about-compiling-to-javascript-and-null-safety">What should I know about compiling to JavaScript and null safety?</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#resources">Resources</a></li>
</ul>
</div>


      <article>
        <div class="content">
          

          <div>
            <div id="page-github-links" class="btn-group" aria-label="Page GitHub links" role="group">
  <a href="https://github.com/dart-lang/site-www/tree/main/src/null-safety/faq.md" class="btn no-automatic-external" title="View page source" target="_blank" rel="noopener">
    <i class="fas fa-file-alt fa-sm"></i>
  </a>
  <a href="https://github.com/dart-lang/site-www/issues/new?template=1_page_issue.yml&title=[PAGE ISSUE]: 'Null safety: Frequently asked questions'&page-url=https://dart.esdocu.com/null-safety/faq.html&page-source=https://github.com/dart-lang/site-www/tree/main/src/null-safety/faq.md" class="btn no-automatic-external" title="Report an issue with this page"
    target="_blank" rel="noopener">
    <i class="fas fa-bug fa-sm"></i>
  </a>
</div>

            <h1>Null safety: Frequently asked questions</h1>
          </div>
          







<div id="site-toc--inline" class="site-toc toc-collapsible toc-collapsed">
  <header class="site-toc__title">
    Contents
    <button type="button" class="btn site-toc--button__page-top" aria-label="Page top"></button>
    
      <span class="site-toc--inline__toggle toc-toggle-down"><i class="material-icons">keyboard_arrow_down</i></span>
      <span class="site-toc--inline__toggle toc-toggle-up"><i class="material-icons">keyboard_arrow_up</i></span>
    
  </header>
  <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#what-runtime-changes-should-i-be-aware-of-for-users-of-migrated-code">What runtime changes should I be aware of for users of migrated code?</a></li>
<li class="toc-entry toc-h2"><a href="#what-if-a-value-is-only-null-in-tests">What if a value is only null in tests?</a></li>
<li class="toc-entry toc-h2"><a href="#how-does-required-compare-to-the-new-required-keyword">How does @required compare to the new required keyword?</a></li>
<li class="toc-entry toc-h2"><a href="#how-should-i-migrate-non-nullable-fields-that-should-be-final-but-arent">How should I migrate non-nullable fields that should be final, but aren’t?</a></li>
<li class="toc-entry toc-h2"><a href="#how-should-i-migrate-a-built_value-class">How should I migrate a built_value class?</a></li>
<li class="toc-entry toc-h2"><a href="#how-should-i-migrate-a-factory-that-can-return-null">How should I migrate a factory that can return null?</a></li>
<li class="toc-entry toc-h2"><a href="#how-should-i-migrate-an-assertx--null-that-now-shows-as-unnecessary">How should I migrate an assert(x != null) that now shows as unnecessary?</a></li>
<li class="toc-entry toc-h2"><a href="#how-should-i-migrate-a-runtime-null-check-that-now-shows-as-unnecessary">How should I migrate a runtime null check that now shows as unnecessary?</a></li>
<li class="toc-entry toc-h2"><a href="#the-iterablefirstwhere-method-no-longer-accepts-orelse---null">The Iterable.firstWhere method no longer accepts orElse: () =&gt; null.</a></li>
<li class="toc-entry toc-h2"><a href="#how-do-i-deal-with-attributes-that-have-setters">How do I deal with attributes that have setters?</a></li>
<li class="toc-entry toc-h2"><a href="#how-do-i-signal-that-the-return-value-from-a-map-is-non-nullable">How do I signal that the return value from a Map is non-nullable?</a></li>
<li class="toc-entry toc-h2"><a href="#why-is-the-generic-type-on-my-listmap-nullable">Why is the generic type on my List/Map nullable?</a></li>
<li class="toc-entry toc-h2"><a href="#what-happened-to-the-default-list-constructor">What happened to the default List constructor?</a></li>
<li class="toc-entry toc-h2"><a href="#im-using-packageffi-and-get-a-failure-with-dart_cobject_kunsupported-when-i-migrate-what-happened">I’m using package:ffi and get a failure with Dart_CObject_kUnsupported when I migrate. What happened?</a></li>
<li class="toc-entry toc-h2"><a href="#migration-comments">Why does the migration tool add comments to my code?</a></li>
<li class="toc-entry toc-h2"><a href="#what-should-i-know-about-compiling-to-javascript-and-null-safety">What should I know about compiling to JavaScript and null safety?</a></li>
<li class="toc-entry toc-h2"><a href="#resources">Resources</a></li>
</ul>
</div>


          <p>This page collects some common questions we’ve heard about <a href="/null-safety">null safety</a>
based on the experience of migrating Google internal code.</p>

<h2 id="what-runtime-changes-should-i-be-aware-of-for-users-of-migrated-code">
<a class="anchor" href="#what-runtime-changes-should-i-be-aware-of-for-users-of-migrated-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>What runtime changes should I be aware of for users of migrated code?</h2>

<p>Most of the effects of migration do not immediately affect users of migrated
code:</p>

<ul>
  <li>Static null safety checks for users first apply when they migrate their
code.</li>
  <li>Full null safety checks happen when all the code is migrated and sound mode
is turned on.</li>
</ul>

<p>Two exceptions to be aware of are:</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">!</code> operator is a runtime null check in all modes, for all users. So,
when migrating, ensure that you only add <code class="language-plaintext highlighter-rouge">!</code> where it’s an error for a
<code class="language-plaintext highlighter-rouge">null</code> to flow to that location, even if the calling code has not migrated
yet.</li>
  <li>Runtime checks associated with the <code class="language-plaintext highlighter-rouge">late</code> keyword apply in all modes, for
all users. Only mark a field <code class="language-plaintext highlighter-rouge">late</code> if you are sure it is always initialized
before it is used.</li>
</ul>

<h2 id="what-if-a-value-is-only-null-in-tests">
<a class="anchor" href="#what-if-a-value-is-only-null-in-tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>What if a value is only <code class="language-plaintext highlighter-rouge">null</code> in tests?</h2>

<p>If a value is only ever <code class="language-plaintext highlighter-rouge">null</code> in tests, the code can be improved by marking it
non-nullable and making the tests pass non-null values.</p>

<h2 id="how-does-required-compare-to-the-new-required-keyword">
<a class="anchor" href="#how-does-required-compare-to-the-new-required-keyword" aria-hidden="true"><span class="octicon octicon-link"></span></a>How does <code class="language-plaintext highlighter-rouge">@required</code> compare to the new <code class="language-plaintext highlighter-rouge">required</code> keyword?</h2>

<p>The <code class="language-plaintext highlighter-rouge">@required</code> annotation marks named arguments that must be passed; if not,
the analyzer reports a hint.</p>

<p>With null safety, a named argument with a non-nullable type must either have a
default or be marked with the new <code class="language-plaintext highlighter-rouge">required</code> keyword. Otherwise, it wouldn’t
make sense for it to be non-nullable, because it would default to <code class="language-plaintext highlighter-rouge">null</code> when
not passed.</p>

<p>When null safe code is called from legacy code the <code class="language-plaintext highlighter-rouge">required</code> keyword is treated
exactly like the <code class="language-plaintext highlighter-rouge">@required</code> annotation: failure to supply the argument will
cause an analyzer hint.</p>

<p>When null safe code is called from null safe code, failing to supply a
<code class="language-plaintext highlighter-rouge">required</code> argument is an error.</p>

<p>What does this mean for migration? Be careful if adding <code class="language-plaintext highlighter-rouge">required</code> where there
was no <code class="language-plaintext highlighter-rouge">@required</code> before. Any callers not passing the newly-required argument
will no longer compile. Instead, you could add a default or make the argument
type nullable.</p>

<h2 id="how-should-i-migrate-non-nullable-fields-that-should-be-final-but-arent">
<a class="anchor" href="#how-should-i-migrate-non-nullable-fields-that-should-be-final-but-arent" aria-hidden="true"><span class="octicon octicon-link"></span></a>How should I migrate non-nullable fields that should be <code class="language-plaintext highlighter-rouge">final</code>, but aren’t?</h2>

<p>Some computations can be moved to the static initializer. Instead of:</p>

<pre class="prettyprint lang-dart bad"><code>// Initialized without values
ListQueue _context;
Float32List _buffer;
dynamic _readObject;

Vec2D(Map&lt;String, dynamic&gt; object) {
  _buffer = Float32List.fromList([0.0, 0.0]);
  _readObject = object['container'];
  _context = ListQueue&lt;dynamic&gt;();
}</code></pre>

<p>you can do:</p>

<pre class="prettyprint lang-dart good"><code>// Initialized with values
final ListQueue _context = ListQueue&lt;dynamic&gt;();
final Float32List _buffer = Float32List.fromList([0.0, 0.0]);
final dynamic _readObject;

Vec2D(Map&lt;String, dynamic&gt; object) : _readObject = object['container'];</code></pre>

<p>However, if a field is initialized by doing computation in the constructor, then
it can’t be <code class="language-plaintext highlighter-rouge">final</code>. With null safety, you’ll find this also makes it harder for
it to be non-nullable; if it’s initialized too late, then it’s <code class="language-plaintext highlighter-rouge">null</code> until it’s
initialized, and must be nullable. Fortunately, you have options:</p>

<ul>
  <li>Turn the constructor into a factory, then make it delegate to an actual
constructor that initializes all the fields directly. A common name for such
a private constructor is just an underscore: <code class="language-plaintext highlighter-rouge">_</code>. Then, the field can be
<code class="language-plaintext highlighter-rouge">final</code> and non-nullable. This refactoring can be done <em>before</em> the
migration to null safety.</li>
  <li>Or, mark the field <code class="language-plaintext highlighter-rouge">late final</code>. This enforces that it’s initialized exactly
once. It must be initialized before it can be read.</li>
</ul>

<h2 id="how-should-i-migrate-a-built_value-class">
<a class="anchor" href="#how-should-i-migrate-a-built_value-class" aria-hidden="true"><span class="octicon octicon-link"></span></a>How should I migrate a <code class="language-plaintext highlighter-rouge">built_value</code> class?</h2>

<p>Getters that were annotated <code class="language-plaintext highlighter-rouge">@nullable</code> should instead have nullable types; then
remove all <code class="language-plaintext highlighter-rouge">@nullable</code> annotations. For example:</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@nullable</span>
<span class="kt">int</span> <span class="kd">get</span> <span class="n">count</span><span class="o">;</span>
</code></pre></div></div>

<p>becomes</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span><span class="o">?</span> <span class="kd">get</span> <span class="n">count</span><span class="o">;</span> <span class="c1">//  Variable initialized with ?</span>
</code></pre></div></div>

<p>Getters that were <em>not</em> marked <code class="language-plaintext highlighter-rouge">@nullable</code> should <em>not</em> have nullable types,
even if the migration tool suggests them. Add <code class="language-plaintext highlighter-rouge">!</code> hints as needed then rerun the
analysis.</p>

<h2 id="how-should-i-migrate-a-factory-that-can-return-null">
<a class="anchor" href="#how-should-i-migrate-a-factory-that-can-return-null" aria-hidden="true"><span class="octicon octicon-link"></span></a>How should I migrate a factory that can return <code class="language-plaintext highlighter-rouge">null</code>?</h2>

<p><em>Prefer factories that do not return null.</em> We have seen code that meant to
throw an exception due to invalid input but instead ended up returning null.</p>

<p>Instead of:</p>

<pre class="prettyprint lang-dart bad"><code>factory StreamReader(dynamic data) {
  StreamReader reader;
  if (data is ByteData) {
    reader = BlockReader(data);
  } else if (data is Map) {
    reader = JSONBlockReader(data);
  }
  return reader;
}</code></pre>

<p>Do:</p>

<pre class="prettyprint lang-dart good"><code>factory StreamReader(dynamic data) {
  if (data is ByteData) {
    // Move the readIndex forward for the binary reader.
    return BlockReader(data);
  } else if (data is Map) {
    return JSONBlockReader(data);
  } else {
    throw ArgumentError('Unexpected type for data');
  }
}</code></pre>

<p>If the intent of the factory was indeed to return null, then you can turn it
into a static method so it is allowed to return <code class="language-plaintext highlighter-rouge">null</code>.</p>

<h2 id="how-should-i-migrate-an-assertx--null-that-now-shows-as-unnecessary">
<a class="anchor" href="#how-should-i-migrate-an-assertx--null-that-now-shows-as-unnecessary" aria-hidden="true"><span class="octicon octicon-link"></span></a>How should I migrate an <code class="language-plaintext highlighter-rouge">assert(x != null)</code> that now shows as unnecessary?</h2>

<p>The assert will be unnecessary when everything is fully migrated, but for now it
<em>is</em> needed if you actually want to keep the check. Options:</p>

<ul>
  <li>Decide that the assert is not really necessary, and remove it. This is a
change in behavior when asserts are enabled.</li>
  <li>Decide that the assert can be checked always, and turn it into
<code class="language-plaintext highlighter-rouge">ArgumentError.checkNotNull</code>. This is a change in behavior when asserts are
not enabled.</li>
  <li>Keep the behavior exactly as is: add <code class="language-plaintext highlighter-rouge">// ignore:
unnecessary_null_comparison</code> to bypass the warning.</li>
</ul>

<h2 id="how-should-i-migrate-a-runtime-null-check-that-now-shows-as-unnecessary">
<a class="anchor" href="#how-should-i-migrate-a-runtime-null-check-that-now-shows-as-unnecessary" aria-hidden="true"><span class="octicon octicon-link"></span></a>How should I migrate a runtime null check that now shows as unnecessary?</h2>

<p>The compiler flags an explicit runtime null check as an unnecessary
comparison if you make <code class="language-plaintext highlighter-rouge">arg</code> non-nullable.</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">(</span><span class="n">arg</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">throw</span> <span class="n">ArgumentError</span><span class="o">(...)</span><span class="err">`</span>
</code></pre></div></div>

<p>You must include this check if the program is a mixed-version one.
Until everything is fully migrated and the code switches to running
with sound null safety, <code class="language-plaintext highlighter-rouge">arg</code> might be set to <code class="language-plaintext highlighter-rouge">null</code>.</p>

<p>The simplest way to preserve behavior is change the check into
<a href="https://api.dart.dev/stable/dart-core/ArgumentError/checkNotNull.html"><code class="language-plaintext highlighter-rouge">ArgumentError.checkNotNull</code></a>.</p>

<p>The same applies to some runtime type checks. If <code class="language-plaintext highlighter-rouge">arg</code>
has static type <code class="language-plaintext highlighter-rouge">String</code>, then <code class="language-plaintext highlighter-rouge">if (arg is! String)</code> is actually checking
whether <code class="language-plaintext highlighter-rouge">arg</code> is <code class="language-plaintext highlighter-rouge">null</code>. It might look like migrating to null safety means <code class="language-plaintext highlighter-rouge">arg</code>
can never be <code class="language-plaintext highlighter-rouge">null</code>, but it could be <code class="language-plaintext highlighter-rouge">null</code> in unsound null safety. So, to preserve
behavior, the null check should remain.</p>

<h2 id="the-iterablefirstwhere-method-no-longer-accepts-orelse---null">
<a class="anchor" href="#the-iterablefirstwhere-method-no-longer-accepts-orelse---null" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code class="language-plaintext highlighter-rouge">Iterable.firstWhere</code> method no longer accepts <code class="language-plaintext highlighter-rouge">orElse: () =&gt; null</code>.</h2>

<p>Import <code class="language-plaintext highlighter-rouge">package:collection</code> and use the extension method <code class="language-plaintext highlighter-rouge">firstWhereOrNull</code>
instead of <code class="language-plaintext highlighter-rouge">firstWhere</code>.</p>

<h2 id="how-do-i-deal-with-attributes-that-have-setters">
<a class="anchor" href="#how-do-i-deal-with-attributes-that-have-setters" aria-hidden="true"><span class="octicon octicon-link"></span></a>How do I deal with attributes that have setters?</h2>

<p>Unlike the <code class="language-plaintext highlighter-rouge">late final</code> suggestion above, these attributes cannot be marked as
final. Often, settable attributes also do not have initial values since they are
expected to be set sometime later.</p>

<p>In such cases, you have two options:</p>

<ul>
  <li>Set it to an initial value. Often times, the omission of an initial value is
by mistake rather than deliberate.</li>
  <li>
    <p>If you are <em>sure</em> that the attribute needs to be set before accessed, mark
it as <code class="language-plaintext highlighter-rouge">late</code>.</p>

    <p>WARNING: The <code class="language-plaintext highlighter-rouge">late</code> keyword adds a runtime check. If any user calls <code class="language-plaintext highlighter-rouge">get</code>
before <code class="language-plaintext highlighter-rouge">set</code> they’ll get an error at runtime.</p>
  </li>
</ul>

<h2 id="how-do-i-signal-that-the-return-value-from-a-map-is-non-nullable">
<a class="anchor" href="#how-do-i-signal-that-the-return-value-from-a-map-is-non-nullable" aria-hidden="true"><span class="octicon octicon-link"></span></a>How do I signal that the return value from a Map is non-nullable?</h2>

<p>The
<a href="https://api.dart.dev/stable/dart-core/Map/operator_get.html">lookup operator</a>
on Map (<code class="language-plaintext highlighter-rouge">[]</code>) by default returns a nullable type. There’s no way to signal to
the language that the value is guaranteed to be there.</p>

<p>In this case, you should use the bang operator (<code class="language-plaintext highlighter-rouge">!</code>) to cast the value back to
V:</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="n">blockTypes</span><span class="o">[</span><span class="n">key</span><span class="o">]!;</span>
</code></pre></div></div>

<p>Which will throw if the map returns null. If you want explicit handling for that case:</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="n">result</span> <span class="o">=</span> <span class="n">blockTypes</span><span class="o">[</span><span class="n">key</span><span class="o">];</span>
<span class="k">if</span> <span class="o">(</span><span class="n">result</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="c1">// Handle the null case here, e.g. throw with explanation.</span>
</code></pre></div></div>

<h2 id="why-is-the-generic-type-on-my-listmap-nullable">
<a class="anchor" href="#why-is-the-generic-type-on-my-listmap-nullable" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why is the generic type on my List/Map nullable?</h2>

<p>It is typically a code smell to end up with nullable code like this:</p>

<pre class="prettyprint lang-dart bad"><code>List&lt;Foo?&gt; fooList; // fooList can contain null values</code></pre>

<p>This implies <code class="language-plaintext highlighter-rouge">fooList</code> might contain null values. This might happen if you are
initializing the list with length and filling it in via a loop.</p>

<p>If you are simply initializing the list with the same value, you should instead
use the 
<a href="https://api.dart.dev/stable/dart-core/List/List.filled.html"><code class="language-plaintext highlighter-rouge">filled</code></a> 
constructor.</p>

<pre class="prettyprint lang-dart bad"><code>_jellyCounts = List&lt;int?&gt;(jellyMax + 1);
for (var i = 0; i &lt;= jellyMax; i++) {
  _jellyCounts[i] = 0; // List initialized with the same value
}</code></pre>

<pre class="prettyprint lang-dart good"><code>_jellyCounts = List&lt;int&gt;.filled(jellyMax + 1, 0); // List initialized with filled constructor</code></pre>

<p>If you are setting the elements of the list via an index, or you are populating
each element of the list with a distinct value, you should instead use the
list literal syntax to build the list.</p>

<pre class="prettyprint lang-dart bad"><code>_jellyPoints = List&lt;Vec2D?&gt;(jellyMax + 1);
for (var i = 0; i &lt;= jellyMax; i++) {
  _jellyPoints[i] = Vec2D(); // Each list element is a distinct Vec2D
}</code></pre>

<pre class="prettyprint lang-dart good"><code>_jellyPoints = [
  for (var i = 0; i &lt;= jellyMax; i++)
    Vec2D() // Each list element is a distinct Vec2D
];</code></pre>

<h2 id="what-happened-to-the-default-list-constructor">
<a class="anchor" href="#what-happened-to-the-default-list-constructor" aria-hidden="true"><span class="octicon octicon-link"></span></a>What happened to the default List constructor?</h2>

<p>You may encounter this error:</p>

<pre><code class="language-none">The default 'List' constructor isn't available when null safety is enabled. #default_list_constructor
</code></pre>

<p>The default list constructor fills the list with <code class="language-plaintext highlighter-rouge">null</code>, which is a problem.</p>

<p>Change it to <code class="language-plaintext highlighter-rouge">List.filled(length, default)</code> instead.</p>

<h2 id="im-using-packageffi-and-get-a-failure-with-dart_cobject_kunsupported-when-i-migrate-what-happened">
<a class="anchor" href="#im-using-packageffi-and-get-a-failure-with-dart_cobject_kunsupported-when-i-migrate-what-happened" aria-hidden="true"><span class="octicon octicon-link"></span></a>I’m using <code class="language-plaintext highlighter-rouge">package:ffi</code> and get a failure with <code class="language-plaintext highlighter-rouge">Dart_CObject_kUnsupported</code> when I migrate. What happened?</h2>

<p>Lists sent via ffi can only be <code class="language-plaintext highlighter-rouge">List&lt;dynamic&gt;</code>, not <code class="language-plaintext highlighter-rouge">List&lt;Object&gt;</code> or
<code class="language-plaintext highlighter-rouge">List&lt;Object?&gt;</code>. If you didn’t change a list type explicitly in your migration,
a type might still have changed because of changes to type inference that happen
when you enable null safety.</p>

<p>The fix is to explicitly create such lists as <code class="language-plaintext highlighter-rouge">List&lt;dynamic&gt;</code>.</p>

<h2 id="migration-comments">
<a class="anchor" href="#migration-comments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why does the migration tool add comments to my code?</h2>

<p>The migration tool adds <code class="language-plaintext highlighter-rouge">/* == false */</code> or <code class="language-plaintext highlighter-rouge">/* == true */</code> comments when it
sees conditions that will always be false or true while running in sound mode.
Comments like these might indicate that the automatic migration is incorrect and
needs human intervention. For example:</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">(</span><span class="n">registry</span><span class="o">.</span><span class="na">viewFactory</span><span class="o">(</span><span class="n">viewDescriptor</span><span class="o">.</span><span class="na">id</span><span class="o">)</span> <span class="o">==</span> <span class="kc">null</span> <span class="cm">/* == false */</span><span class="o">)</span>
</code></pre></div></div>

<p>In these cases, the migration tool can’t distinguish defensive-coding situations
and situations where a null value is really expected. So the tool tells you what
it knows (“it looks like this condition will always be false!”) and lets you
decide what to do.</p>

<h2 id="what-should-i-know-about-compiling-to-javascript-and-null-safety">
<a class="anchor" href="#what-should-i-know-about-compiling-to-javascript-and-null-safety" aria-hidden="true"><span class="octicon octicon-link"></span></a>What should I know about compiling to JavaScript and null safety?</h2>

<p>Null safety brings many benefits like reduced code size and improved
app performance. Such benefits surface more when compiled to native
targets like Flutter and AOT. Previous work on the production web
compiler had introduced optimizations similar to what null safety
later introduced. This may make resulting gains to production web apps
seem less than their native targets.</p>

<p>A few notes that are worth highlighting:</p>

<ul>
  <li>
    <p>The production JavaScript compiler generates <code class="language-plaintext highlighter-rouge">!</code> null assertions. You might
not notice them when comparing the output of the compiler before and
after adding null assertions. That’s because the compiler already
generated null checks in programs that weren’t null safe.</p>
  </li>
  <li>
    <p>The compiler generates these null assertions regardless of the
soundness of null safety or optimization level. In fact, the compiler
doesn’t remove <code class="language-plaintext highlighter-rouge">!</code> when using <code class="language-plaintext highlighter-rouge">-O3</code> or <code class="language-plaintext highlighter-rouge">--omit-implicit-checks</code>.</p>
  </li>
  <li>
    <p>The production JavaScript compiler might remove unnecessary null checks.
This happens because the optimizations that the production web
compiler made prior to null safety removed those checks when it
knew the value was not null.</p>
  </li>
  <li>
    <p>By default, the compiler would generate parameter subtype checks.
These runtime checks ensure covariant virtual calls have appropriate
arguments. The compiler skips these checks with the
<code class="language-plaintext highlighter-rouge">--omit-implicit-checks</code> option. Using this option can generate apps
with unexpected behavior if the code includes invalid types.
To avoid any surprises, continue provide strong test coverage for
your code. In particular, the compiler optimizes code based
on the fact that inputs should comply with the type declaration. If
the code provides arguments of an invalid type, those optimizations
would be wrong and the program could misbehave. This was true for
inconsistent types before, and is true with inconsistent 
nullabilities now with sound null-safety.</p>
  </li>
  <li>
    <p>You may notice that the development JavaScript compiler and the Dart 
VM have special error messages for null checks, but to keep 
applications small, the production JavaScript compiler does not.</p>
  </li>
  <li>
    <p>You may see errors indicating that <code class="language-plaintext highlighter-rouge">.toString</code> is not found on <code class="language-plaintext highlighter-rouge">null</code>.
This is not a bug. The compiler has always encoded some null checks
in this way. That is, the compiler represents some null checks
compactly by making an unguarded access of a property of the
receiver. So instead of <code class="language-plaintext highlighter-rouge">if (a == null) throw</code>, it generates
<code class="language-plaintext highlighter-rouge">a.toString</code>. The <code class="language-plaintext highlighter-rouge">toString</code> method is defined in JavaScript Object
and is a fast way to verify that an object is not null.</p>

    <p>If the very first action after a null check is an action that crashes
when the value is null, the compiler can remove the null check and
let the action cause the error.</p>

    <p>For example, a Dart expression <code class="language-plaintext highlighter-rouge">print(a!.foo());</code> could turn directly
into:</p>

    <div class="language-js highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nx">P</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">foo$0</span><span class="p">());</span>
</code></pre></div>    </div>

    <p>This is because the call <code class="language-plaintext highlighter-rouge">a.foo$()</code> will crash if <code class="language-plaintext highlighter-rouge">a</code> is null.
If the compiler inlines <code class="language-plaintext highlighter-rouge">foo</code>, it will preserve the null check.
So for example, if <code class="language-plaintext highlighter-rouge">foo</code> was <code class="language-plaintext highlighter-rouge">int foo() =&gt; 1;</code>  the compiler might 
generate:</p>

    <div class="language-js highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nx">a</span><span class="p">.</span><span class="nx">toString</span><span class="p">;</span>
  <span class="nx">P</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</code></pre></div>    </div>

    <p>If the inlined method first accessed a field on the receiver, like
<code class="language-plaintext highlighter-rouge">int foo() =&gt; this.x + 1;</code>, then the production compiler can remove
the redundant <code class="language-plaintext highlighter-rouge">a.toString</code> null check, as non-inlined calls, and
generate:</p>

    <div class="language-js highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nx">P</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="resources">
<a class="anchor" href="#resources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Resources</h2>

<ul>
  <li><a href="https://dartpad.dev">DartPad with Null Safety</a></li>
  <li><a href="/null-safety">Sound null safety</a></li>
</ul>

          

        </div>
      </article>
    </main>
    <footer id="page-footer">
  <div class="footer-section footer-main">
    <a href="/" class="brand" title="Dart">
      <img src="/assets/img/shared/dart/logo+text/horizontal/white.svg" alt="Dart" width="164px">
    </a>
    <div class="footer-social-links">
      <a href="https://medium.com/dartlang" target="_blank" rel="noopener" title="Medium blog" class="no-automatic-external">
        <svg>
          <use href="/assets/img/social/medium.svg#medium"></use>
        </svg>
      </a>
      <a href="https://github.com/dart-lang" target="_blank" rel="noopener" title="GitHub" class="no-automatic-external">
        <svg>
          <use href="/assets/img/social/github.svg#github"></use>
        </svg>
      </a>
      <a href="https://twitter.com/dart_lang" target="_blank" rel="noopener" title="Twitter" class="no-automatic-external">
        <svg>
          <use href="/assets/img/social/twitter.svg#twitter"></use>
        </svg>
      </a>
    </div>
  </div>
  <div class="footer-section footer-tray">
    <div class="footer-licenses">
      Salvo que se indique lo contrario, este sitio está bajo una 
      <a href="https://creativecommons.org/licenses/by/4.0/" class="no-automatic-external">licencia internacional Creative Commons Attribution 4.0</a >, 
      y los ejemplos de código tienen licencia 
      <a href="https://opensource.org/licenses/BSD-3-Clause" class="no-automatic-external">3-Clause BSD License</a>.
    </div>
    <div class="footer-utility-links">
      <ul>
        <li><a href="/terms" title="Terms of use">Términos</a></li>
        <li><a href="https://policies.google.com/privacy" target="_blank" rel="noopener" title="Privacy policy" class="no-automatic-external">Privacidad</a></li>
        <li><a href="/security" title="Security philosophy and practices">Seguridad</a></li>
      </ul>
    </div>
  </div>
</footer>

   
  </body>
</html>
